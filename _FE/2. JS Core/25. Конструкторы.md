Конструктор это функция, которая, будучи вызвана с ключевым словом `new` возвращает вновь созданный объект. 

Конструкторы принято называть с большой буквы, чтобы как-то отличать их от обычных функций:

```js ln=true
let Person, person, anotherPerson;

Person = function(name) {
	this.name = name;
};

person = new Person('Roman');
anotherPerson = new Person('Nata');
console.log(person.name); // Roman
console.log(anotherPerson.name); // Nata

Person.prototype.greet = function () {
	console.log('Hello, my name is ' + this.name);
};

person.greet(); // Hello, my name is Roman
anotherPerson.greet(); // Hello, my name is Nata
```

Здесь конструктор принимает значение имени и записывает это свойство в объект. `(4)`

На строке `(12)` мы определяем свойство-метод `greet()` для прототипа объектов `Person`, которая выводит имя в консоль. Этот метод будет доступен всем созданным на основе этого прототипа объектам `(16)`, `(17)`.

Каждому объекту автоматически создается скрытое свойство `constructor`, которое вызывается при создании объекта.

Когда вызывается конструктор, то происходит следующее:
- Создаётся новый пустой объект, и он присваивается `this`.
- Выполняется тело функции. Обычно оно модифицирует `this`, добавляя туда новые свойства.
- Возвращается значение `this`.

## new function() { … }
Если в нашем коде присутствует большое количество строк, создающих один сложный объект, то мы можем обернуть их в функцию-конструктор, которая будет немедленно вызвана, вот так:

```javascript
// создаём функцию и сразу же вызываем её с помощью new
let user = new function() {
  this.name = "John";
  this.isAdmin = false;

  // ...другой код для создания пользователя
  // возможна любая сложная логика и инструкции
  // локальные переменные и так далее
};
```

Такой конструктор не может быть вызван снова, так как он нигде не сохраняется, просто создаётся и тут же вызывается. Таким образом, этот трюк направлен на инкапсуляцию кода, который создаёт отдельный объект, без возможности повторного использования в будущем.

## Создание методов в конструкторе

Использование конструкторов для создания объектов даёт большую гибкость. Функции-конструкторы могут иметь параметры, определяющие, как создавать объект и что в него записывать.

Конечно, мы можем добавить к `this` не только свойства, но и методы.

Например, `new User(name)` ниже создаёт объект с заданным `name` и методом `sayHi`:

```javascript
function User(name) {
  this.name = name;

  this.sayHi = function() {
    alert( "Меня зовут: " + this.name );
  };
}

let john = new User("John");

john.sayHi(); // Меня зовут: John

/*
john = {
   name: "John",
   sayHi: function() { ... }
}
*/
```

